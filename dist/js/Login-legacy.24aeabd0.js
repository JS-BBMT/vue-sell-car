"use strict";(self["webpackChunkflutter_buy_sell"]=self["webpackChunkflutter_buy_sell"]||[]).push([[4438],{2921:function(e,n,t){t.d(n,{Z:function(){return s}});var o=t(6252),a=t(3577),i=["type","value","maxlength"];function l(e,n,t,l,r,u){return(0,o.wg)(),(0,o.iD)("input",{class:(0,a.C_)(["lg:text-sm text-xs",t.theme]),type:t.type,value:t.value,maxlength:t.maxlength,onInput:n[0]||(n[0]=function(e){return l.handleInput(e.target.value)})},null,42,i)}var r={name:"PsInput",props:{value:String,type:{type:String,default:"text"},theme:{type:String,default:"ring-primary-200 dark:ring-primaryDark-grey focus:outline-none focus:ring py-2 ps-4 form-input bg-primary-000 dark:bg-primaryDark-black text-secondary-500 dark:text-secondaryDark-white rounded-xl lg:rounded-2xl"},maxlength:{type:Number,default:99999999},onInput:Function},setup:function(e,n){var t=n.emit;function o(n){t("update:value",n),null!=e.onInput&&e.onInput(n)}return{handleInput:o}}},u=t(8118);const c=(0,u.Z)(r,[["render",l]]);var s=c},2253:function(e,n,t){t.d(n,{Z:function(){return g}});var o=t(6252),a=t(3577),i={class:"flex flex-row justify-end"};function l(e,n,t,l,r,u){var c=(0,o.up)("ps-label-title"),s=(0,o.up)("ps-label"),d=(0,o.up)("ps-input"),p=(0,o.up)("ps-button"),f=(0,o.up)("ps-modal");return(0,o.wg)(),(0,o.j4)(f,{ref:"psmodal",maxWidth:"350px",isClickOut:!1,class:"z-20"},{title:(0,o.w5)((function(){return[(0,o.Wm)(c,null,{default:(0,o.w5)((function(){return[(0,o.Uk)((0,a.zw)(e.title),1)]})),_:1})]})),body:(0,o.w5)((function(){return[(0,o.Wm)(s,{class:"ms-1"},{default:(0,o.w5)((function(){return[(0,o.Uk)((0,a.zw)(e.$t("user_phone_login_verification_modal__please_input_code")),1)]})),_:1}),(0,o.Wm)(d,{class:"my-3 ms-1 w-5/6",value:e.verificationCode,"onUpdate:value":n[0]||(n[0]=function(n){return e.verificationCode=n})},null,8,["value"])]})),footer:(0,o.w5)((function(){return[(0,o._)("div",i,[e.isConfirmed?((0,o.wg)(),(0,o.j4)(p,{key:0,onClick:n[1]||(n[1]=function(n){return e.actionClicked("yes")})},{default:(0,o.w5)((function(){return[(0,o.Uk)((0,a.zw)(e.okButton),1)]})),_:1})):((0,o.wg)(),(0,o.j4)(p,{key:1,onClick:n[2]||(n[2]=function(n){return e.actionClicked("confirm")})},{default:(0,o.w5)((function(){return[(0,o.Uk)((0,a.zw)(e.$t("user_phone_login_verification_modal__confirm")),1)]})),_:1})),(0,o.Wm)(p,{onClick:n[3]||(n[3]=function(n){return e.actionClicked("no")}),theme:"input-second",class:"ms-4"},{default:(0,o.w5)((function(){return[(0,o.Uk)((0,a.zw)(e.cancelButton),1)]})),_:1})])]})),_:1},512)}var r=t(2262),u=t(2379),c=t(4687),s=t(1340),d=t(3013),p=t(2921),f=(0,o.aZ)({name:"UserPhoneLoginVerificationModal",components:{PsModal:u.Z,PsLabel:c.Z,PsLabelTitle:s.Z,PsButton:d.Z,PsInput:p.Z},setup:function(){var e,n,t=(0,r.iH)(),o=(0,r.iH)("Confirm"),a=(0,r.iH)("Are you confirm ?"),i=(0,r.iH)("Yes"),l=(0,r.iH)("No"),u=(0,r.iH)(!1),c=(0,r.iH)("");function s(o){""!=c.value?"yes"==o?(e(c.value),t.value.toggle(!1)):"confirm"==o?u.value=!0:(n(),t.value.toggle(!1)):"no"==o&&t.value.toggle(!1)}function d(r,c,s,d,p,f){o.value=r,a.value=c.toString(),i.value=s,l.value=d,t.value.toggle(!0),e=p,n=f,u.value=!1}return{psmodal:t,title:o,message:a,openModal:d,actionClicked:s,okButton:i,cancelButton:l,verificationCode:c,isConfirmed:u}}}),_=t(8118);const m=(0,_.Z)(f,[["render",l]]);var g=m},2755:function(e,n,t){t.r(n),t.d(n,{default:function(){return V}});var o=t(6252),a=t(3577),i=t(9963),l={class:"sm:mt-28 lg:mt-28 mt-28 bg-primary-500 dark:bg-primaryDark-accent h-screen flex flex-col"},r={class:"mt-56 w-96 flex flex-col mx-auto bg-background dark:bg-backgroundDark m-auto rounded-lg"},u=(0,o._)("div",{id:"recaptcha-container"},null,-1),c=(0,o.Uk)(),s=(0,o._)("br",null,null,-1),d={class:"flex items-center justify-center mb-4"},p={class:"flex flex-auto justify-center mt-4 mb-10"};function f(e,n,t,f,_,m){var g=(0,o.up)("ps-label-title"),v=(0,o.up)("ps-label"),h=(0,o.up)("ps-input"),k=(0,o.up)("ps-label-caption"),w=(0,o.up)("ps-button"),y=(0,o.up)("user-phone-login-verification-modal"),b=(0,o.up)("ps-error-dialog");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",l,[(0,o._)("div",r,[(0,o.Wm)(g,{class:"mt-8 mx-auto text-2xl"},{default:(0,o.w5)((function(){return[(0,o.Uk)((0,a.zw)(e.$t("phone_login__phone_login")),1)]})),_:1}),(0,o.Wm)(v,{class:"mt-4 mx-8"},{default:(0,o.w5)((function(){return[(0,o.Uk)((0,a.zw)(e.$t("phone_login__user_name"))+" : ",1)]})),_:1}),(0,o.Wm)(h,{class:"mt-2 mx-8",type:"text",placeholder:e.$t("phone_login__user_name"),onKeyup:(0,i.D2)(f.clicked,["enter"]),onKeypress:f.validateName,value:f.name,"onUpdate:value":n[0]||(n[0]=function(e){return f.name=e})},null,8,["placeholder","onKeyup","onKeypress","value"]),f.isValidUserName?((0,o.wg)(),(0,o.j4)(k,{key:0,class:"mt-2 mx-8",textColor:"text-primary-500 dark:text-primaryDark-accent"},{default:(0,o.w5)((function(){return[(0,o.Uk)((0,a.zw)(e.$t("phone_login__user_name_required")),1)]})),_:1})):(0,o.kq)("",!0),(0,o.Wm)(k,{class:"mt-2 mx-8"},{default:(0,o.w5)((function(){return[(0,o.Uk)((0,a.zw)(e.$t("phone_login__user_name_format")),1)]})),_:1}),(0,o.Wm)(v,{class:"mt-4 mx-8"},{default:(0,o.w5)((function(){return[(0,o.Uk)((0,a.zw)(e.$t("phone_login__phone_number"))+" : ",1)]})),_:1}),(0,o.Wm)(h,{class:"mt-2 mx-8",type:"text",placeholder:e.$t("phone_login__phone_number_placeholder"),value:e.$t("country_code"),onKeyup:(0,i.D2)(f.clicked,["enter"]),onKeypress:f.validatePhone,"onUpdate:value":n[1]||(n[1]=function(e){return f.phone=e})},null,8,["placeholder","value","onKeyup","onKeypress"]),f.isValidPhone?((0,o.wg)(),(0,o.j4)(k,{key:1,class:"mt-2 mx-8",textColor:"text-primary-500 dark:text-primaryDark-accent"},{default:(0,o.w5)((function(){return[(0,o.Uk)((0,a.zw)(e.$t("phone_login__phone_required")),1)]})),_:1})):(0,o.kq)("",!0),u,c,s,(0,o._)("div",d,[f.userProvider.loading.value?((0,o.wg)(),(0,o.j4)(w,{key:0,class:"mt-6 mx-8",disabled:!0},{default:(0,o.w5)((function(){return[(0,o.Uk)((0,a.zw)(e.$t("phone_login__loading")),1)]})),_:1})):((0,o.wg)(),(0,o.j4)(w,{key:1,class:"mt-6 mx-8",onClick:f.clicked,disabled:!1},{default:(0,o.w5)((function(){return[(0,o.Uk)((0,a.zw)(e.$t("phone_login__login")),1)]})),_:1},8,["onClick"]))]),(0,o._)("div",p,[(0,o.Wm)(k,{class:"cursor-pointer",onClick:f.loginClicked},{default:(0,o.w5)((function(){return[(0,o.Uk)((0,a.zw)(e.$t("phone_login__back_to_login")),1)]})),_:1},8,["onClick"])])])]),(0,o.Wm)(y,{ref:"user_phone_login_verification_modal"},null,512),(0,o.Wm)(b,{ref:"ps_error_dialog"},null,512)],64)}var _=t(655),m=t(2262),g=t(5503),v=(t(2211),t(8345)),h=t(3824),k=t(4687),w=t(1340),y=t(4625),b=t(3013),x=t(2921),C=t(2253),Z=t(5429),U=t(9399),P=t(7259),$=t(3542),z=t(2567),W=t(679),H=t(9070),L={name:"PhoneLoginView",components:{PsLabel:k.Z,PsLabelTitle:w.Z,PsButton:b.Z,PsInput:x.Z,UserPhoneLoginVerificationModal:C.Z,PsErrorDialog:Z.Z,PsLabelCaption:y.Z},setup:function(){var e,n=(0,P.ie)(),t=new $.Z,a=(0,v.yj)(),i=U.$.psValueHolder,l=i.getLoginUserId(),r=(0,m.iH)(),u=(0,m.iH)(),c=(0,m.iH)(!1),s=(0,m.iH)(!1),d=(0,m.iH)(),p=(0,m.iH)();function f(){n.loading.value=!0,setTimeout((function(){window.recaptchaVerifier=new g.Z.auth.RecaptchaVerifier("recaptcha-container",{size:"invisible",callback:function(e){H.Z.log("Callback"),H.Z.log(e)},"expired-callback":function(){H.Z.log("expiry callback")}}),e=window.recaptchaVerifier,n.loading.value=!1}),1e3)}function k(){n.navigateUserLoginTo("login",h.Z,a.query.redirect,a.query,a.params)}function w(){return(0,_.mG)(this,void 0,void 0,(function(){var o,i,f,m=this;return(0,_.Jh)(this,(function(v){switch(v.label){case 0:return o=!0,""!=r.value&&void 0!=r.value||(c.value=!0,o=!1),""!=r.value&&void 0!=r.value||(s.value=!0,o=!1),o?(t.phoneId=l,t.userName=r.value,t.userPhone=u.value,n.loading.value=!0,i=e,[4,g.Z.auth().signInWithPhoneNumber(u.value,i).catch((function(e){n.loading.value=!1,p.value.openModal(W.a.global.t("phone_login__error_in_sign_in"),null===e||void 0===e?void 0:e.message)}))]):(window.scrollTo(0,0),[2]);case 1:return f=v.sent(),n.loading.value=!1,void 0!=f&&d.value.openModal("Phone No Verification","","Submit","Cancel",(function(e){return(0,_.mG)(m,void 0,void 0,(function(){var o=this;return(0,_.Jh)(this,(function(i){return n.loading.value=!0,f.confirm(e).then((function(e){return(0,_.mG)(o,void 0,void 0,(function(){var o;return(0,_.Jh)(this,(function(i){switch(i.label){case 0:return null==e||null==e.user||null==e.user.uid||""==e.user.uid?[3,2]:(o=e.user,t.phoneId=o.uid,[4,n.submitUserLoginWithPhoneId(o.uid,r.value,u.value)]);case 1:return i.sent(),n.userResource.status==z.Z.SUCCESS?n.navigateUserLoginRedirect(a.query.redirect,"dashboard",h.Z,a.query.redirect,a.query,a.params):(p.value.openModal(W.a.global.t("phone_login__error_in_sign_in"),n.userResource.message),n.setLoading(!1)),[3,3];case 2:n.setLoading(!1),i.label=3;case 3:return[2]}}))}))})).catch((function(e){n.setLoading(!1),p.value.openModal(W.a.global.t("phone_login__error_in_sign_in"),null===e||void 0===e?void 0:e.message)})),[2]}))}))}),(function(){H.Z.log("Cancel")})),[2]}}))}))}function y(e){var n=/^\/$|(\/[a-zA-Z_0-9-]+)+$/,t=n.test(e.target.value);c.value=!!t}function b(e){var n=/^\/$|(\/[a-zA-Z_0-9-]+)+$/,t=n.test(e.target.value);s.value=!!t}return n.loading.value=!0,(0,o.bv)((function(){f()})),{userProvider:n,clicked:w,name:r,phone:u,user_phone_login_verification_modal:d,ps_error_dialog:p,loginClicked:k,isValidUserName:c,validateName:y,validatePhone:b,isValidPhone:s}}},I=t(8118);const D=(0,I.Z)(L,[["render",f]]);var V=D}}]);
//# sourceMappingURL=Login-legacy.24aeabd0.js.map